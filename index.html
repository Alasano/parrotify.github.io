<!doctype html>
<title>
    Party Parrot as a Service
</title>
<link rel="stylesheet" type="text/css" href="PPaaS.css">
<script>
    const basicParrotImage = "https://ppaas.herokuapp.com/partyparrot"
    function parrotify() {
        var parrotOverlayImage = document.getElementById("parrot").value;
        var parrotOverlayHeight = document.getElementById("height").value;
        var parrotOverlayWidth = document.getElementById("width").value;
        var parrotOverlayOffsetX = document.getElementById("horizontalPosition").value;
        var parrotOverlayOffsetY = document.getElementById("verticalPosition").value;
        var newImprovedParrot = basicParrotImage + "?overlay=" + parrotOverlayImage + "&overlayWidth=" + parrotOverlayWidth + "&overlayHeight=" + parrotOverlayHeight + "&overlayOffsetX=" + parrotOverlayOffsetX + "&overlayOffsetY=" + parrotOverlayOffsetY;
        document.getElementById("parrotImage").src = newImprovedParrot;
        document.getElementById("parrotImageURL").value = newImprovedParrot;
        document.getElementById("error").innerHTML = "";
    }

    function validateParrot(url) {
        var image = new Image();
        image.onload = parrotify()
        image.onerror = function () {document.getElementById("error").innerHTML="Please enter a valid image URL"}
        image.src = url;
    }

    function showValueHeight(newValue) {
        document.getElementById("rangeHeight").innerHTML=newValue;
    }

    function showValueWidth(newValue) {
        document.getElementById("rangeWidth").innerHTML=newValue;
    }

    function showValueHorizontal(newValue) {
        document.getElementById("rangeHorizontalPosition").innerHTML=newValue;
    }

    function showValueVertical(newValue) {
        document.getElementById("rangeVerticalPosition").innerHTML=newValue;
    }
</script>
<body>
    <h1>Party Parrot as a Service</h1>
    <p>Enter a link to an image:</p>
    <input type="text" id="parrot" value="Enter a URL here" onchange="validateParrot(this.value)" />
    <p id="error" style="color:#ff0000"></p>
    <p>Set the overlain image's height</p>
    <input type="range" min="0" max="25" value="20" id="height" oninput="showValueHeight(this.value)" onchange="validateParrot()" />
    <span id="rangeHeight">20</span> <span>pixels</span>
    <p>Set the overlain image's width</p>
    <input type="range" min="0" max="35" value="20" id="width" oninput="showValueWidth(this.value)" onchange="validateParrot()" />
    <span id="rangeWidth">20</span> <span>pixels</span>
    <p>Set the overlain image's horizontal position</p>
    <input type="range" min="-30" max="30" value="0" id="horizontalPosition" oninput="showValueHorizontal(this.value)" onchange="validateParrot()" />
    <span id="rangeHorizontalPosition">0</span> <span>pixels</span>
    <p>Set the overlain image's vertical position</p>
    <input type="range" min="-30" max="30" value="0" id="verticalPosition" oninput="showValueVertical(this.value)" onchange="validateParrot()" />
    <span id="rangeVerticalPosition">0</span> <span>pixels</span>
    <br />
    <a class="button-small" onclick="validateParrot()">Refresh the parrot!</a>
    <br />
    <br />
    <img src="https://ppaas.herokuapp.com/partyparrot" id="parrotImage">
    <br />
    <span>See the URL to the parrot image</span>
    <br />
    <input type="text" id="parrotImageURL" value="https://ppaas.herokuapp.com/partyparrot" />
    <hr />
    <a class="button-small" href="http://cultofthepartyparrot.com/">Cult of the Party Parrot</a>
    <a class="button-small" href="https://github.com/francoislg/PPaaS">PPaaS on GitHub</a>
    <hr />
</body>
